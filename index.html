<!DOCTYPE html>
<html lang="en">
<html>
<head>
    <title>Currency Converter</title>
    <script src="https://unpkg.com/react/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"></link>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <style>
        body {
            font-family: 'Roboto', sans-serif;
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen">
     <!-- The root element where the React application will be rendered -->
    <div id="root"></div>
    <script type="text/babel">
        const { useState, useEffect } = React;

        // Define a list of currencies
        const currencies = [
            { code: 'USD', name: 'United States Dollar', flag: 'https://placehold.co/32x32' },
            { code: 'EUR', name: 'Euro', flag: 'https://placehold.co/32x32' },
            { code: 'GBP', name: 'British Pound Sterling', flag: 'https://placehold.co/32x32' },
            { code: 'JPY', name: 'Japanese Yen', flag: 'https://placehold.co/32x32' },
            { code: 'CAD', name: 'Canadian Dollar', flag: 'https://placehold.co/32x32' },
            { code: 'AUD', name: 'Australian Dollar', flag: 'https://placehold.co/32x32' },
            { code: 'CHF', name: 'Swiss Franc', flag: 'https://placehold.co/32x32' },
            { code: 'INR', name: 'Indian Rupee', flag: 'https://placehold.co/32x32' },
            { code: 'BRL', name: 'Brazilian Real', flag: 'https://placehold.co/32x32' },
            { code: 'RUB', name: 'Russian Ruble', flag: 'https://placehold.co/32x32' },
            { code: 'ZAR', name: 'South African Rand', flag: 'https://placehold.co/32x32' },
            { code: 'MXN', name: 'Mexican Peso', flag: 'https://placehold.co/32x32' },
            { code: 'BTC', name: 'Bitcoin', flag: 'https://placehold.co/32x32' },
            { code: 'ETH', name: 'Ethereum', flag: 'https://placehold.co/32x32' },
            { code: 'USDT', name: 'Tether', flag: 'https://placehold.co/32x32' },
            { code: 'XRP', name: 'Ripple', flag: 'https://placehold.co/32x32' },
            { code: 'ADA', name: 'Cardano', flag: 'https://placehold.co/32x32' },
            { code: 'PKR', name: 'Pakistani Rupee', flag: 'https://placehold.co/32x32' },
            // Add More currencies as you need.
        ];

        // Define the main application component
        function App() {
            // Define state variables for the application
            const [baseCurrency, setBaseCurrency] = useState('USD');
            const [targetCurrency, setTargetCurrency] = useState('PKR');
            const [amount, setAmount] = useState();
            const [convertedAmount, setConvertedAmount] = useState();
            const [exchangeRate, setExchangeRate] = useState(0);
            const [history, setHistory] = useState([]);
            const [favorites, setFavorites] = useState([]);
            // Fetch the exchange rate when the base or target currency changes
            useEffect(() => {
                fetchExchangeRate();
            }, [baseCurrency, targetCurrency]);
                // Function to fetch the exchange rate from the API
            const fetchExchangeRate = async () => {
                const response = await fetch(`https://api.exchangerate-api.com/v4/latest/${baseCurrency}`);
                const data = await response.json();
                setExchangeRate(data.rates[targetCurrency]);
                setConvertedAmount((amount * data.rates[targetCurrency]).toFixed(2));
            };

            const handleAmountChange = (e) => {
                const newAmount = e.target.value;
                setAmount(newAmount);
                setConvertedAmount((newAmount * exchangeRate).toFixed(2));
            };

            const handleExchange = () => {
                const temp = baseCurrency;
                setBaseCurrency(targetCurrency);
                setTargetCurrency(temp);
            };

            const addToHistory = () => {
                const newHistory = [...history, { baseCurrency, targetCurrency, amount, convertedAmount }];
                setHistory(newHistory);
            };

            const addToFavorites = () => {
                const newFavorites = [...favorites, { baseCurrency, targetCurrency }];
                setFavorites(newFavorites);
            };

            return (
                <div className="bg-white p-6 rounded-lg shadow-lg w-80">
                    <h1 className="text-xl font-bold text-center text-gray-800">Currency Converter</h1>
                    <p className="text-center text-gray-500 mb-4">Check live rates, set rate alerts, receive notifications and more.</p>
                    <div className="mb-4">
                        <div className="dropdown">
                            <button className="btn btn-secondary dropdown-toggle w-full" type="button" id="baseCurrencyDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                                {baseCurrency}
                            </button>
                            <ul className="dropdown-menu" aria-labelledby="baseCurrencyDropdown">
                                {currencies.map(currency => (
                                    <li key={currency.code}>
                                        <a className="dropdown-item" href="#" onClick={() => setBaseCurrency(currency.code)}>
                                            <img src={currency.flag} alt={`${currency.name} flag`} className="w-4 h-4 mr-2" />
                                            {currency.name} ({currency.code})
                                        </a>
                                    </li>
                                ))}
                            </ul>
                        </div>
                        <input type="text" value={amount} onChange={handleAmountChange} className="border border-gray-300 rounded-lg p-2 w-full mt-2 text-right" />
                    </div>
                    <div className="flex items-center justify-center mb-4">
                        <i className="fas fa-exchange-alt text-blue-500 text-2xl cursor-pointer" onClick={handleExchange}></i>
                    </div>
                    <div className="mb-4">
                        <div className="dropdown">
                            <button className="btn btn-secondary dropdown-toggle w-full" type="button" id="targetCurrencyDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                                {targetCurrency}
                            </button>
                            <ul className="dropdown-menu" aria-labelledby="targetCurrencyDropdown">
                                {currencies.map(currency => (
                                    <li key={currency.code}>
                                        <a className="dropdown-item" href="#" onClick={() => setTargetCurrency(currency.code)}>
                                            <img src={currency.flag} alt={`${currency.name} flag`} className="w-4 h-4 mr-2" />
                                            {currency.name} ({currency.code})
                                        </a>
                                    </li>
                                ))}
                            </ul>
                        </div>
                        <input type="text" value={convertedAmount} className="border border-gray-300 rounded-lg p-2 w-full mt-2 text-right" readOnly />
                    </div>
                    <div className="text-center text-gray-500 mb-4">
                        <p>1 {baseCurrency} = {exchangeRate} {targetCurrency}</p>
                    </div>
                    <div className="flex justify-between mb-4">
                        <button className="btn btn-primary" onClick={addToHistory}>Add to History</button>
                        <button className="btn btn-warning" onClick={addToFavorites}>Add to Favorites</button>
                    </div>
                    <div className="mb-4">
                        <h2 className="text-lg font-bold text-gray-800">History</h2>
                        <ul className="list-disc pl-5">
                            {history.map((item, index) => (
                                <li key={index} className="text-gray-600">
                                    {item.amount} {item.baseCurrency} = {item.convertedAmount} {item.targetCurrency}
                                </li>
                            ))}
                        </ul>
                    </div>
                    <div>
                        <h2 className="text-lg font-bold text-gray-800">Favorites</h2>
                        <ul className="list-disc pl-5">
                            {favorites.map((item, index) => (
                                <li key={index} className="text-gray-600">
                                    {item.baseCurrency} to {item.targetCurrency}
                                </li>
                            ))}
                        </ul>
                    </div>
                </div>
            );
        }

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>